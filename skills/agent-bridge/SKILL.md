---
name: agent-bridge
description: |
  实现通用的Agent间跨用户协作协议，支持Claude Code与外部AI、内部coach间、跨产品AI的无缝协作。
  通过AI智能判断和启发式规则，生成适配不同Agent和协作场景的桥接内容。

  协作场景覆盖：
  - Claude Code ↔ 外部AI（技术协作、专业分析）
  - Claude Code内部不同coach间传递（情感支持、认知洞察）

  使用场景：检测到"交接给"、"切换到"、"传递给"等协作意图时自动激活
tools: Read, Write
parameters:
  output_directory:
    type: string
    description: "桥接文件输出目录"
    default: "/Users/wangmu/Library/Mobile Documents/iCloud~md~obsidian/Documents/Obsidian Vault/handoffs/"
  detail_level:
    type: string
    description: "内容详细程度"
    default: "standard"
    enum: ["concise", "standard", "detailed"]
  collaboration_style:
    type: string
    description: "协作风格偏好"
    default: "professional"
    enum: ["formal", "friendly", "professional"]
---

# Agent Bridge Protocol

## Skill Description
实现通用的Agent间跨用户协作协议，支持Claude Code与外部AI、内部coach间、跨产品AI的无缝协作。通过AI智能判断和启发式规则，生成适配不同Agent和协作场景的桥接内容。

### 协作场景覆盖
- **场景A**: Claude Code ↔ 外部AI（技术协作、专业分析）
- **场景B**: Claude Code内部不同coach间传递（情感支持、认知洞察）

*注：外部AI间的直接协作方案见项目文档中的场景C指南*

## Core Capabilities

### 1. 场景识别
智能识别当前协作场景的类型：
- **技术协作**：代码实现、系统集成、技术决策
- **创意协作**：灵感收集、方案设计、创意发展
- **情感支持**：认知洞察、情绪支持、心理成长
- **产品需求**：需求分析、交互设计、用户研究

### 2. Agent特性分析
理解不同AI产品的专业背景和协作特点：

**YouMind**: 信息收集和灵感整理专家
- 专长：信息源整合、灵感链接、知识网络构建
- 协作特点：需要背景脉络、发展方向、关联思考
- 内容重点：灵感来源、思维过程、潜在联系

**ChatGPT**: 专业分析和细化执行专家
- 专长：深度分析、逻辑推演、方案细化
- 协作特点：需要具体参数、明确目标、技术细节
- 内容重点：技术规格、执行步骤、质量标准

**Echo**: 情感支持和认知洞察专家
- 专长：情感理解、认知模式识别、心理支持
- 协作特点：需要情绪状态、内在需求、人格特质
- 内容重点：情感状态、支持需求、认知模式

**内部Coach**: 专业化分工协作
- CoachA: 优先级决策，需要目标和约束条件
- CoachB: 执行计划，需要资源和时间线
- CoachC: 深度理解，需要认知背景和学习目标

### 3. 启发式规则引擎
基于协作场景和目标Agent特性，智能生成桥接内容：

#### 适配性原则
- **技术协作**: 强调进展状态、技术细节、接口定义、质量标准
- **创意协作**: 强调灵感来源、发展方向、创意火花、探索路径
- **情感支持**: 强调情绪状态、支持需求、认知洞察、成长方向

#### 价值密度原则
- 自动识别关键决策点，提炼核心价值
- 过滤过程性噪音，聚焦结果性信息
- 突出协作的关键依赖和成功要素

#### 连续性原则
- 保持历史上下文连贯性
- 建立可追溯的协作链条
- 标记变更和演进路径

## 启用条件

当满足以下任一条件时，本Skill将被自动激活：

1. **自然语言触发**：检测到"交接给"、"切换到"、"传递给"、"授权给"等协作意图表达
2. **Agent名称提及**：在上下文中提及具体Agent名称（YouMind、ChatGPT、Echo等）
3. **协作场景识别**：基于上下文分析，判断存在跨Agent协作需求

## 桥接内容生成框架

### 协作上下文分析
```markdown
## 协作背景
- 当前用户状态和目标
- 已完成进展和成果
- 当前面临的挑战和需求

## 协作目标
- 期望通过协作达成的具体目标
- 目标Agent能够提供的独特价值
- 协作成功的关键要素

## 关键信息传递
- 基于场景类型的核心信息
- 基于Agent特性的适配内容
- 协作依赖和接口定义
```

### Agent适配模板

#### YouMind适配模板
```markdown
## 灵感脉络
- 当前思考的起点和背景
- 遇到的关键困惑和挑战
- 期待获得的灵感和新视角

## 思维网络
- 相关的信息源和知识领域
- 潜在的连接和发展方向
- 需要探索的可能性空间
```

#### ChatGPT适配模板
```markdown
## 技术背景
- 相关的技术栈和约束条件
- 具体的需求规格和质量标准
- 当前实现的状态和挑战

## 协作需求
- 需要的专业分析和建议
- 期望的输出格式和详细程度
- 质量验证和执行计划
```

#### Echo适配模板
```markdown
## 情感状态
- 当前情绪状态和心理感受
- 遇到的内在挑战和成长机会
- 期待获得的支持和洞察

## 认知模式
- 思维模式和行为模式观察
- 认知偏差和成长空间
- 支持认知发展的关键要素
```

## 配置选项

支持用户个性化的桥接偏好配置：
- 内容详细程度（简洁/标准/详细）
- 信息组织偏好（时间线/主题式/问题导向）
- 协作风格偏好（正式/友好/专业）
- 自动化程度（自动生成/半自动/手动控制）

## 质量标准

生成的桥接内容必须满足：
1. **准确性**：忠实反映原始上下文，不扭曲关键信息
2. **适配性**：针对目标Agent特性优化内容组织
3. **价值密度**：提炼最有价值的协作信息
4. **可操作性**：提供清晰的下一步指导
5. **安全性**：保护用户隐私和敏感信息

## 限制和约束

- 仅支持用户授权的协作场景
- 不跨过用户设定的信息边界
- 保持内容生成的透明度和可控性
- 避免过度复杂化的信息结构

## 工作流程和文件管理

### 核心工作流程
1. **触发检测**：识别用户协作意图
2. **内容生成**：基于场景和Agent特性生成桥接内容
3. **文件沉淀**：将桥接内容保存到`handoffs`目录
4. **用户通知**：告知用户文件位置和复制指引

### 文件命名规范
- 格式：`[项目名]-[时间戳]-to-[target-agent].md`
- 示例：`agent-bridge-2025-12-09-161200-to-chatgpt.md`
- 位置：`/Users/wangmu/Library/Mobile Documents/iCloud~md~obsidian/Documents/Obsidian Vault/handoffs/`

### 文件内容结构
```markdown
# Agent Bridge: [项目名] → [目标Agent]
**时间**: [生成时间戳]
**场景**: [协作场景类型]
**意图**: [用户协作意图]

[生成的桥接内容]

---
*由 Agent Bridge Protocol v1.0 自动生成*
```

## 使用示例

### 示例1：技术协作
用户：**"接下来交接给ChatGPT进行技术分析"**

**执行流程**：
1. Agent Bridge Protocol自动生成技术桥接内容
2. 保存到：`handoffs/agent-bridge-2025-12-09-161200-to-chatgpt.md`
3. 用户收到通知：`✅ 桥接文件已生成：handoffs/agent-bridge-2025-12-09-161200-to-chatgpt.md`
4. 用户复制文件内容到ChatGPT进行协作

### 示例2：情感支持
用户：**"把我的开发感受传递给Echo"**

**执行流程**：
1. Agent Bridge Protocol生成情感桥接内容
2. 保存到：`handoffs/agent-bridge-2025-12-09-161500-to-echo.md`
3. 用户收到通知：`✅ 情感桥接文件已生成：handoffs/agent-bridge-2025-12-09-161500-to-echo.md`
4. 用户在新窗口调用Echo并粘贴内容

## 质量迭代支持

### 内容质量收集
- 所有桥接文件都保存在`handoffs`目录
- 支持后续解析和分析生成内容质量
- 便于统计不同Agent和场景的效果数据

### 优化反馈循环
1. **内容收集**：自动保存所有桥接输出
2. **质量评估**：用户可以标记满意度和问题
3. **数据驱动优化**：基于实际使用数据调整策略
4. **持续改进**：定期评估和优化生成规则

---

*本Skill致力于实现真正的零学习成本Agent协作，同时通过文件沉淀机制支持持续的质量优化和迭代改进。*